# Health Index Rework TODO

## Phase 1. Terminology and zone consistency
- Replace all UI mentions of `Score продукта` with `Health Index`.
- Standardize zone naming everywhere: `Зеленая`, `Желтая`, `Красная`.
- Rewrite help text in dialogs/tooltips to be short and business-readable.
- Add explicit zone interpretation in chart help content.

## Phase 2. Bubble tooltip payload
- Extend `ProductBubblePoint` with indicator shares for all 4 indicators.
- Show in bubble tooltip:
  1. Health Index
  2. Indicator 1 share
  3. Indicator 2 share
  4. Indicator 3 share
  5. Indicator 4 share
  6. Zone
- Apply for both home and detailed bubble charts.

## Phase 3. Bubble size proportionality
- Make bubble radius adaptive to chart size (container-aware).
- Preserve readability in small focused cards and large main chart.

## Phase 4. Week/month period focus
- Remove `День` from detailed analytics grouping UI.
- Use `week` as default granularity.
- Map legacy `day` from query/localStorage to `week`.
- Snap date ranges to week/month boundaries for filtering.
- Use labels like `W## (dd MMM–dd MMM)` for week buckets.

## Phase 5. Detailed bubble trajectory
- Replace single bubble with multi-point trajectory over selected period.
- X axis: period bucket; Y axis: Health Index; bubble size: call volume.
- Keep global weights/thresholds aligned with home page logic.

## Phase 6. Coverage chart semantics
- Rework call coverage to:
  - N1 = all calls
  - N2 = consultation calls
- Update chart title, labels, and tooltip wording accordingly.

## Phase 7. Regression and cleanup
- Sweep for legacy terms/risk labels and remove inconsistencies.
- Verify adaptive layout on desktop/mobile.
- Run `pnpm lint` and fix all type issues.
