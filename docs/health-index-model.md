# Модель индекса здоровья продукта

## Цель
Сделать метрику максимально прозрачной для бизнеса:
1. индекс равен доле обращений с хотя бы одним индикатором;
2. без весов по тегам;
3. чем ниже индекс, тем лучше состояние продукта.

## Базовые сущности
1. `totalCalls` — число уникальных обращений (`caseId`) за период.
2. `problemCallsUnique` — число уникальных обращений, где есть хотя бы один из 4 негативных тегов.
3. `tagCount_i` — число уникальных обращений с тегом `i`.

## Формулы

### 1) Доля проблемных обращений
`problemRate = (problemCallsUnique / totalCalls) * 100`

где:
1. `problemCallsUnique` — уникальные звонки, где есть хотя бы один из 4 индикаторов;
2. `totalCalls` — все уникальные звонки по продукту в периоде.

### 2) Индекс здоровья (текущая бизнес-версия)
`healthIndex = problemRate`

Интерпретация:
1. `88%` означает, что `88%` обращений имели хотя бы один индикатор;
2. чем ниже значение, тем лучше.

## Зоны
### Зоны bubble-matrix по доле проблемных обращений (`problemRate` / `healthIndex`)
1. Зеленая: `0–5%`
2. Желтая: `5–30%`
3. Красная: `30–100%`

Это визуальные границы по оси X главной страницы `/`.

## Где в коде (source of truth)
1. `/Users/bbeglerov/Developer/Playground/graphs.bbeglerov.dev/features/insight-dashboard/domain/health-index.ts`
